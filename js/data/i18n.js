import { WMO } from './wmo-codes.js';

export const I18N = {
  en: {
    title: "Weather", search: "Search city...", loading: "Loading\u2026",
    requesting: "Requesting location...", errorLoad: "Unable to load weather data.",
    errorGeo: "Geolocation not supported. Search for a city.",
    today: "Today", lastYear: "Last Year", chart: "4-Week Highs",
    thisYear: "This year", lastYearLegend: "Last year",
    warmer: "warmer", cooler: "cooler", same: "Same as last year",
    cities: "Cities", emptyCities: "Search to add cities", deleteCity: "Delete",
    wmo: WMO
  },
  ja: {
    title: "\u5929\u6C17", search: "\u90FD\u5E02\u3092\u691C\u7D22...", loading: "\u8AAD\u307F\u8FBC\u307F\u4E2D\u2026",
    requesting: "\u4F4D\u7F6E\u60C5\u5831\u3092\u53D6\u5F97\u4E2D...", errorLoad: "\u5929\u6C17\u30C7\u30FC\u30BF\u3092\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002",
    errorGeo: "\u4F4D\u7F6E\u60C5\u5831\u304C\u5229\u7528\u3067\u304D\u307E\u305B\u3093\u3002\u90FD\u5E02\u3092\u691C\u7D22\u3057\u3066\u304F\u3060\u3055\u3044\u3002",
    today: "\u4ECA\u65E5", lastYear: "\u6628\u5E74", chart: "4\u9031\u9593\u306E\u6700\u9AD8\u6C17\u6E29",
    thisYear: "\u4ECA\u5E74", lastYearLegend: "\u6628\u5E74",
    warmer: "\u6696\u304B\u3044", cooler: "\u6DB2\u3057\u3044", same: "\u6628\u5E74\u3068\u540C\u3058",
    cities: "\u90FD\u5E02", emptyCities: "\u90FD\u5E02\u3092\u691C\u7D22\u3057\u3066\u8FFD\u52A0", deleteCity: "\u524A\u9664",
    wmo: {0:"\u5FEB\u6674",1:"\u6674\u308C",2:"\u66C7\u308A\u6642\u3005\u6674\u308C",3:"\u66C7\u308A",45:"\u9727",48:"\u9727",51:"\u5C0F\u96E8",53:"\u96E8",55:"\u5F37\u3044\u96E8",56:"\u51CD\u96E8",57:"\u51CD\u96E8",61:"\u5C0F\u96E8",63:"\u96E8",65:"\u5927\u96E8",66:"\u51CD\u96E8",67:"\u51CD\u96E8",71:"\u5C0F\u96EA",73:"\u96EA",75:"\u5927\u96EA",77:"\u96EA",80:"\u306B\u308F\u304B\u96E8",81:"\u96E8",82:"\u5F37\u3044\u96E8",85:"\u96EA",86:"\u5927\u96EA",95:"\u96F7\u96E8",96:"\u96F7\u96E8",99:"\u96F7\u96E8"}
  },
  ru: {
    title: "\u041F\u043E\u0433\u043E\u0434\u0430", search: "\u041F\u043E\u0438\u0441\u043A \u0433\u043E\u0440\u043E\u0434\u0430...", loading: "\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430\u2026",
    requesting: "\u041E\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D\u0438\u0435 \u043C\u0435\u0441\u0442\u043E\u043F\u043E\u043B\u043E\u0436\u0435\u043D\u0438\u044F...", errorLoad: "\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u043E \u043F\u043E\u0433\u043E\u0434\u0435.",
    errorGeo: "\u0413\u0435\u043E\u043B\u043E\u043A\u0430\u0446\u0438\u044F \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u0430. \u041D\u0430\u0439\u0434\u0438\u0442\u0435 \u0433\u043E\u0440\u043E\u0434 \u0447\u0435\u0440\u0435\u0437 \u043F\u043E\u0438\u0441\u043A.",
    today: "\u0421\u0435\u0433\u043E\u0434\u043D\u044F", lastYear: "\u0413\u043E\u0434 \u043D\u0430\u0437\u0430\u0434", chart: "\u041C\u0430\u043A\u0441. \u0442\u0435\u043C\u043F. \u0437\u0430 4 \u043D\u0435\u0434.",
    thisYear: "\u042D\u0442\u043E\u0442 \u0433\u043E\u0434", lastYearLegend: "\u041F\u0440\u043E\u0448\u043B\u044B\u0439 \u0433\u043E\u0434",
    warmer: "\u0442\u0435\u043F\u043B\u0435\u0435", cooler: "\u0445\u043E\u043B\u043E\u0434\u043D\u0435\u0435", same: "\u041A\u0430\u043A \u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C \u0433\u043E\u0434\u0443",
    cities: "\u0413\u043E\u0440\u043E\u0434\u0430", emptyCities: "\u041D\u0430\u0439\u0434\u0438\u0442\u0435 \u0433\u043E\u0440\u043E\u0434 \u0447\u0435\u0440\u0435\u0437 \u043F\u043E\u0438\u0441\u043A", deleteCity: "\u0423\u0434\u0430\u043B\u0438\u0442\u044C",
    wmo: {0:"\u042F\u0441\u043D\u043E",1:"\u041C\u0430\u043B\u043E\u043E\u0431\u043B\u0430\u0447\u043D\u043E",2:"\u041F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u0430\u044F \u043E\u0431\u043B\u0430\u0447\u043D\u043E\u0441\u0442\u044C",3:"\u041F\u0430\u0441\u043C\u0443\u0440\u043D\u043E",45:"\u0422\u0443\u043C\u0430\u043D",48:"\u0422\u0443\u043C\u0430\u043D",51:"\u041C\u043E\u0440\u043E\u0441\u044C",53:"\u0414\u043E\u0436\u0434\u044C",55:"\u0421\u0438\u043B\u044C\u043D\u044B\u0439 \u0434\u043E\u0436\u0434\u044C",56:"\u041B\u0435\u0434\u044F\u043D\u043E\u0439 \u0434\u043E\u0436\u0434\u044C",57:"\u041B\u0435\u0434\u044F\u043D\u043E\u0439 \u0434\u043E\u0436\u0434\u044C",61:"\u041D\u0435\u0431\u043E\u043B\u044C\u0448\u043E\u0439 \u0434\u043E\u0436\u0434\u044C",63:"\u0414\u043E\u0436\u0434\u044C",65:"\u0421\u0438\u043B\u044C\u043D\u044B\u0439 \u0434\u043E\u0436\u0434\u044C",66:"\u041B\u0435\u0434\u044F\u043D\u043E\u0439 \u0434\u043E\u0436\u0434\u044C",67:"\u041B\u0435\u0434\u044F\u043D\u043E\u0439 \u0434\u043E\u0436\u0434\u044C",71:"\u041D\u0435\u0431\u043E\u043B\u044C\u0448\u043E\u0439 \u0441\u043D\u0435\u0433",73:"\u0421\u043D\u0435\u0433",75:"\u0421\u0438\u043B\u044C\u043D\u044B\u0439 \u0441\u043D\u0435\u0433",77:"\u0421\u043D\u0435\u0433",80:"\u041B\u0438\u0432\u0435\u043D\u044C",81:"\u041B\u0438\u0432\u0435\u043D\u044C",82:"\u0421\u0438\u043B\u044C\u043D\u044B\u0439 \u043B\u0438\u0432\u0435\u043D\u044C",85:"\u0421\u043D\u0435\u0433",86:"\u0421\u0438\u043B\u044C\u043D\u044B\u0439 \u0441\u043D\u0435\u0433",95:"\u0413\u0440\u043E\u0437\u0430",96:"\u0413\u0440\u043E\u0437\u0430",99:"\u0413\u0440\u043E\u0437\u0430"}
  },
  ko: {
    title: "\ub0a0\uc528", search: "\ub3c4\uc2dc \uac80\uc0c9...", loading: "\ub85c\ub529 \uc911\u2026",
    requesting: "\uc704\uce58 \ud655\uc778 \uc911...", errorLoad: "\ub0a0\uc528 \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",
    errorGeo: "\uc704\uce58\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ub3c4\uc2dc\ub97c \uac80\uc0c9\ud558\uc138\uc694.",
    today: "\uc624\ub298", lastYear: "\uc791\ub144", chart: "4\uc8fc\uac04 \ucd5c\uace0 \uae30\uc628",
    thisYear: "\uc62c\ud574", lastYearLegend: "\uc791\ub144",
    warmer: "\ub354 \ub530\ub73b\ud568", cooler: "\ub354 \uc2dc\uc6d0\ud568", same: "\uc791\ub144\uacfc \ub3d9\uc77c",
    cities: "\ub3c4\uc2dc", emptyCities: "\ub3c4\uc2dc\ub97c \uac80\uc0c9\ud558\uc5ec \ucd94\uac00", deleteCity: "\uc0ad\uc81c",
    wmo: WMO
  },
  ar: {
    title: "\u0627\u0644\u0637\u0642\u0633", search: "\u0627\u0628\u062D\u062B \u0639\u0646 \u0645\u062F\u064A\u0646\u0629...", loading: "\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644\u2026",
    requesting: "\u062C\u0627\u0631\u064A \u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0645\u0648\u0642\u0639...", errorLoad: "\u062A\u0639\u0630\u0631 \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0642\u0633.",
    errorGeo: "\u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0645\u0648\u0642\u0639 \u063A\u064A\u0631 \u0645\u062A\u0627\u062D. \u0627\u0628\u062D\u062B \u0639\u0646 \u0645\u062F\u064A\u0646\u0629.",
    today: "\u0627\u0644\u064A\u0648\u0645", lastYear: "\u0627\u0644\u0639\u0627\u0645 \u0627\u0644\u0645\u0627\u0636\u064A", chart: "\u0623\u0639\u0644\u0649 \u062F\u0631\u062C\u0627\u062A - 4 \u0623\u0633\u0627\u0628\u064A\u0639",
    thisYear: "\u0647\u0630\u0627 \u0627\u0644\u0639\u0627\u0645", lastYearLegend: "\u0627\u0644\u0639\u0627\u0645 \u0627\u0644\u0645\u0627\u0636\u064A",
    warmer: "\u0623\u062F\u0641\u0623", cooler: "\u0623\u0628\u0631\u062F", same: "\u0645\u062B\u0644 \u0627\u0644\u0639\u0627\u0645 \u0627\u0644\u0645\u0627\u0636\u064A",
    cities: "\u0627\u0644\u0645\u062F\u0646", emptyCities: "\u0627\u0628\u062D\u062B \u0644\u0625\u0636\u0627\u0641\u0629 \u0645\u062F\u0646", deleteCity: "\u062D\u0630\u0641",
    wmo: WMO
  },
  th: {
    title: "\u0e2a\u0e20\u0e32\u0e1e\u0e2d\u0e32\u0e01\u0e32\u0e28", search: "\u0e04\u0e49\u0e19\u0e2b\u0e32\u0e40\u0e21\u0e37\u0e2d\u0e07...", loading: "\u0e01\u0e33\u0e25\u0e31\u0e07\u0e42\u0e2b\u0e25\u0e14\u2026",
    requesting: "\u0e01\u0e33\u0e25\u0e31\u0e07\u0e23\u0e30\u0e1a\u0e38\u0e15\u0e33\u0e41\u0e2b\u0e19\u0e48\u0e07...", errorLoad: "\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e42\u0e2b\u0e25\u0e14\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e2a\u0e20\u0e32\u0e1e\u0e2d\u0e32\u0e01\u0e32\u0e28",
    errorGeo: "\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e23\u0e30\u0e1a\u0e38\u0e15\u0e33\u0e41\u0e2b\u0e19\u0e48\u0e07 \u0e04\u0e49\u0e19\u0e2b\u0e32\u0e40\u0e21\u0e37\u0e2d\u0e07",
    today: "\u0e27\u0e31\u0e19\u0e19\u0e35\u0e49", lastYear: "\u0e1b\u0e35\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27", chart: "\u0e2d\u0e38\u0e13\u0e2b\u0e20\u0e39\u0e21\u0e34\u0e2a\u0e39\u0e07\u0e2a\u0e38\u0e14 4 \u0e2a\u0e31\u0e1b\u0e14\u0e32\u0e2b\u0e4c",
    thisYear: "\u0e1b\u0e35\u0e19\u0e35\u0e49", lastYearLegend: "\u0e1b\u0e35\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27",
    warmer: "\u0e2d\u0e38\u0e48\u0e19\u0e01\u0e27\u0e48\u0e32", cooler: "\u0e40\u0e22\u0e47\u0e19\u0e01\u0e27\u0e48\u0e32", same: "\u0e40\u0e2b\u0e21\u0e37\u0e2d\u0e19\u0e1b\u0e35\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27",
    cities: "\u0e40\u0e21\u0e37\u0e2d\u0e07", emptyCities: "\u0e04\u0e49\u0e19\u0e2b\u0e32\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e40\u0e21\u0e37\u0e2d\u0e07", deleteCity: "\u0e25\u0e1a",
    wmo: WMO
  },
  el: {
    title: "\u039a\u03b1\u03b9\u03c1\u03cc\u03c2", search: "\u0391\u03bd\u03b1\u03b6\u03ae\u03c4\u03b7\u03c3\u03b7 \u03c0\u03cc\u03bb\u03b7\u03c2...", loading: "\u03a6\u03cc\u03c1\u03c4\u03c9\u03c3\u03b7\u2026",
    requesting: "\u0395\u03bd\u03c4\u03bf\u03c0\u03b9\u03c3\u03bc\u03cc\u03c2 \u03c4\u03bf\u03c0\u03bf\u03b8\u03b5\u03c3\u03af\u03b1\u03c2...", errorLoad: "\u0391\u03b4\u03c5\u03bd\u03b1\u03bc\u03af\u03b1 \u03c6\u03cc\u03c1\u03c4\u03c9\u03c3\u03b7\u03c2 \u03b4\u03b5\u03b4\u03bf\u03bc\u03ad\u03bd\u03c9\u03bd.",
    errorGeo: "\u0397 \u03c4\u03bf\u03c0\u03bf\u03b8\u03b5\u03c3\u03af\u03b1 \u03b4\u03b5\u03bd \u03b5\u03af\u03bd\u03b1\u03b9 \u03b4\u03b9\u03b1\u03b8\u03ad\u03c3\u03b9\u03bc\u03b7. \u0391\u03bd\u03b1\u03b6\u03b7\u03c4\u03ae\u03c3\u03c4\u03b5 \u03c0\u03cc\u03bb\u03b7.",
    today: "\u03a3\u03ae\u03bc\u03b5\u03c1\u03b1", lastYear: "\u03a0\u03ad\u03c1\u03c5\u03c3\u03b9", chart: "\u03a5\u03c8\u03b7\u03bb\u03ad\u03c2 4 \u03b5\u03b2\u03b4\u03bf\u03bc\u03ac\u03b4\u03c9\u03bd",
    thisYear: "\u03a6\u03ad\u03c4\u03bf\u03c2", lastYearLegend: "\u03a0\u03ad\u03c1\u03c5\u03c3\u03b9",
    warmer: "\u03b8\u03b5\u03c1\u03bc\u03cc\u03c4\u03b5\u03c1\u03bf", cooler: "\u03c8\u03c5\u03c7\u03c1\u03cc\u03c4\u03b5\u03c1\u03bf", same: "\u038a\u03b4\u03b9\u03bf \u03bc\u03b5 \u03c0\u03ad\u03c1\u03c5\u03c3\u03b9",
    cities: "\u03a0\u03cc\u03bb\u03b5\u03b9\u03c2", emptyCities: "\u0391\u03bd\u03b1\u03b6\u03b7\u03c4\u03ae\u03c3\u03c4\u03b5 \u03b3\u03b9\u03b1 \u03c0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7", deleteCity: "\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae",
    wmo: WMO
  },
  hi: {
    title: "\u092e\u094c\u0938\u092e", search: "\u0936\u0939\u0930 \u0916\u094b\u091c\u0947\u0902...", loading: "\u0932\u094b\u0921 \u0939\u094b \u0930\u0939\u093e \u0939\u0948\u2026",
    requesting: "\u0938\u094d\u0925\u093e\u0928 \u0916\u094b\u091c \u0930\u0939\u0947 \u0939\u0948\u0902...", errorLoad: "\u092e\u094c\u0938\u092e \u0921\u0947\u091f\u093e \u0932\u094b\u0921 \u0928\u0939\u0940\u0902 \u0939\u094b \u0938\u0915\u093e\u0964",
    errorGeo: "\u0938\u094d\u0925\u093e\u0928 \u0909\u092a\u0932\u092c\u094d\u0927 \u0928\u0939\u0940\u0902\u0964 \u0936\u0939\u0930 \u0916\u094b\u091c\u0947\u0902\u0964",
    today: "\u0906\u091c", lastYear: "\u092a\u093f\u091b\u0932\u0947 \u0938\u093e\u0932", chart: "4 \u0938\u092a\u094d\u0924\u093e\u0939 \u0915\u093e \u0905\u0927\u093f\u0915\u0924\u092e \u0924\u093e\u092a\u092e\u093e\u0928",
    thisYear: "\u0907\u0938 \u0938\u093e\u0932", lastYearLegend: "\u092a\u093f\u091b\u0932\u0947 \u0938\u093e\u0932",
    warmer: "\u0917\u0930\u094d\u092e", cooler: "\u0920\u0902\u0921\u093e", same: "\u092a\u093f\u091b\u0932\u0947 \u0938\u093e\u0932 \u091c\u0948\u0938\u093e",
    cities: "\u0936\u0939\u0930", emptyCities: "\u0936\u0939\u0930 \u0916\u094b\u091c\u0947\u0902 \u0914\u0930 \u091c\u094b\u0921\u093c\u0947\u0902", deleteCity: "\u0939\u091f\u093e\u090f\u0902",
    wmo: WMO
  }
};

let currentLang = "en";

export function setCurrentLang(lang) { currentLang = lang; }
export function getCurrentLang() { return currentLang; }

export function t(key) { return (I18N[currentLang] || I18N.en)[key]; }

export function wmoText(code) { return (I18N[currentLang] || I18N.en).wmo[code] || WMO[code] || "Unknown"; }

export function applyLang(lang) {
  const tr = I18N[lang] || I18N.en;
  currentLang = lang;
  document.documentElement.lang = lang;
  document.getElementById("app-title").textContent = tr.title;
  document.getElementById("city-input").placeholder = tr.search;
  document.getElementById("label-today").textContent = tr.today;
  document.getElementById("label-last-year").textContent = tr.lastYear;
  document.getElementById("label-chart").textContent = tr.chart;
  document.getElementById("legend-this").textContent = tr.thisYear;
  document.getElementById("legend-last").textContent = tr.lastYearLegend;
  document.getElementById("city-list-header").textContent = tr.cities;
  const emptyEl = document.getElementById("city-list-empty");
  if (emptyEl) emptyEl.textContent = tr.emptyCities;
}

export function detectLangFromInput(q) {
  if (/[\u3000-\u9fff\uf900-\ufaff]/.test(q)) return "ja";
  if (/[\u0400-\u04ff]/.test(q)) return "ru";
  if (/[\u0600-\u06ff]/.test(q)) return "ar";
  if (/[\uac00-\ud7af]/.test(q)) return "ko";
  if (/[\u0e00-\u0e7f]/.test(q)) return "th";
  if (/[\u0370-\u03ff]/.test(q)) return "el";
  if (/[\u0900-\u097f]/.test(q)) return "hi";
  return "en";
}
